/*
 * https://github.com/IDEAFY/Ideafy
 * Proprietary License - All rights reserved
 * Author: Vincent Weyl <vincent@ideafy.com>
 * Copyright (c) 2014 IDEAFY LLC
 */

define(["OObject","Bind.plugin","Amy/Control-plugin","service/config"],function(e,t,i,n){function s(e,s){var a,o,r,l,c,d=!1,u=new i(this),p=function(t){t?e.setAttribute("style","display : block;"):e.setAttribute("style","display : none;"),d=t};a="<div></div>",o='<div class="sub-menu"><div class="left-caret"></div><ul class="menu-list" data-menucontrol="radio:li,selected,mousedown,setCurrentWidget"><li class="menu-item selected" name="#ideas" data-menucontrol="init"><a class="library-item" href="#ideas" data-label="bind:innerHTML, library-ideas"></a></li><li class="menu-item" name="#sessions"><a class="library-item" href="#sessions" data-label="bind:innerHTML, library-sessions"></a></li><li class="menu-item" name="#decks"><a class="library-item" href="#decks" data-label="bind:innerHTML, library-decks"></a></li></ul></div>',r="<div></div>",l='<div class="sub-menu"><div class="left-caret"></div><ul class="menu-list" data-menucontrol="radio:li,selected,mousedown,setCurrentWidget"><li class="menu-item selected" data-menucontrol="init" name="#messages"><a class="connect-item" href="#connect-messages" data-label="bind:innerHTML, connect-messages"></a></li><li class="menu-item" name="#contacts"><a class="connect-item" href="#connect-contacts" data-label="bind:innerHTML, connect-contacts"></a></li><li class="menu-item" name="#twocents"><a class="connect-item" href="#connect-twocents" data-label="bind:innerHTML, connect-twocents"></a></li></ul></div>',c='<div class="sub-menu"><div class="left-caret"></div><ul class="menu-list" data-menucontrol="radio:li,selected,mousedown,setCurrentWidget"><li class="menu-item selected" name="#profile" data-menucontrol="init"><a class="dashboard-item" href="#dashboard-profile" data-label="bind:innerHTML, dashboard-profile"></a></li><li class="menu-item" name="#settings"><a class="dashboard-item" href="#dashboard-settings" data-label="bind:innerHTML, dashboard-settings">Settings</a></li><li class="menu-item" name="#about"><a class="dashboard-item" href="#dashboard-about" data-label="bind:innerHTML, dashboard-about">About Ideafy</a></li></ul></div>',e.id.search("public")>-1&&(this.template=a),e.id.search("library")>-1&&(this.template=o),e.id.search("brainstorm")>-1&&(this.template=r),e.id.search("connect")>-1&&(this.template=l),e.id.search("dashboard")>-1&&(this.template=c),this.plugins.addAll({label:new t(n.get("labels")),menucontrol:u}),this.getState=function(){return d},this.toggleActive=function(e){p(e)},this.setCurrentWidget=function(e){var t=e.target.getAttribute("name");s&&s(t),setTimeout(function(){p(!1)},200)},this.setWidget=function(e){var t=this.dom.querySelector('li[name="'+e+'"]');s(e),t.parentNode.querySelector(".selected").classList.remove("selected"),t.classList.add("selected"),u.init(this.dom.querySelector('li[name="'+e+'"]'))},this.reset=function(){var e=this.dom.querySelector(".menu-list");e&&(e.querySelector(".selected").classList.remove("selected"),e.firstChild.classList.add("selected"),u.init(e.firstChild))},this.render(),this.place(e)}return function(t,i){return s.prototype=new e,new s(t,i)}});