/**
 * https://github.com/IDEAFY/Ideafy
 * Proprietary License - All rights reserved
 * Author: Vincent Weyl <vincent@ideafy.com>
 * Copyright (c) 2014 IDEAFY LLC
 */

define(["OObject","service/map","Bind.plugin","Event.plugin","service/config","Store"],function(e,t,i,n,s,a){function o(e,o,r,l){var c=s.get("labels"),d=this,u=new a({question:o}),p=r;d.plugins.addAll({label:new i(c),confirm:new i(u),confirmevent:new n(this)}),d.template='<div class = "confirm"><div class="help-doctor"></div><p class="confirm-question" data-confirm="bind:innerHTML,question"></p><div class="option left" data-confirmevent="listen:mousedown, press; listen:mouseup, ok" data-label="bind: innerHTML, continuelbl">Continue</div><div class="option right" data-confirmevent="listen:mousedown, press; listen:mouseup, cancel" data-label="bind:innerHTML, cancellbl">Cancel</div></div>',d.press=function(e,t){t.classList.add("pressed"),e.stopPropagation()},d.ok=function(e,i){i.classList.remove("pressed"),t.get("cache").classList.remove("appear"),"EULA"===l&&t.get("cache").classList.remove("EULA"),p&&p(!0)},d.cancel=function(e,i){i&&i.classList.remove("pressed"),t.get("cache").classList.remove("appear"),"EULA"===l&&t.get("cache").classList.remove("EULA"),p&&p(!1)},d.close=function(){t.get("cache").classList.remove("appear"),"EULA"===l&&t.get("cache").classList.remove("EULA"),e&&e.removeChild(e.lastChild)},d.hide=function(){t.get("cache").classList.remove("appear"),"EULA"===l&&t.get("cache").classList.remove("EULA"),d.dom.classList.add("invisible")},d.show=function(){t.get("cache").classList.add("appear"),"EULA"===l&&(t.get("cache").classList.add("EULA"),d.dom.querySelector(".option.left").innerHTML=c.get("accept"),d.dom.querySelector(".option.right").innerHTML=c.get("reject")),d.dom.classList.remove("invisible")},d.reset=function(e,t){u.set("question",e),p=t},d.render(),e&&d.place(e),l&&d.dom.classList.add(l),o?u.set("question",o):d.hide(),setTimeout(function(){d.close},15e3)}return function(t,i,n,s){return o.prototype=new e,new o(t,i,n,s)}});