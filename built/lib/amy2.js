/**
 * https://github.com/TAIAUT/Ideafy
 * Proprietary License - All rights reserved
 * Author: Olivier Wietrich <Olivier.Wietrich@taiaut.com>
 * Copyright (c) 2012-2013 TAIAUT
 */

define("Amy/DomUtils",["DomUtils","Tools"],function(e,t){return{hasQuerySelector:function(n,s,i){return t.toArray(e.getNodes(n,i)).indexOf(s)>-1}}}),define("Amy/TestUtils",[],function(){var e=function(e){return"string"==typeof e},t=function(t,n){throw new Error(e(n)?n:t)};return{assertIsObject:function(e,n){return e instanceof Object||t("Is not Object",n),!0},assertIsObservable:function(e,n){return e&&"function"==typeof e.watch&&"function"==typeof e.notify||t("Is not Observable",n),!0},assertIsString:function(n,s){return e(n)||t("Is not String",s),!0}}}),define("Amy/Stack-plugin",["Amy/Stack-service"],function(e){return function(t,n){var s=new e(t,n);this.getStack=function(){return s},this.destination=function(e){s.setDestination(e)},this.hide=function(){s.hide()},this.show=function(e,t,n,i){e.addEventListener(t,function(e){s.show(e.target.getAttribute(n))},"true"==i)}}}),define("Amy/Event-controller",["Amy/TestUtils","Tools"],function(e,t){return function(e,n){var s=e instanceof Object?e:null,i=function(e){return"boolean"==typeof e?e:!1},a=function(){var e,t=!0;for(e=arguments.length;e>=0;e--)t=t&&"string"==typeof arguments[e];return t},o=i(n),r={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"};this.addListener=function(e,t,n,s){e.addEventListener(this.map(t),n,s)},this.call=function(e){s[e].apply(s,t.toArray(arguments).slice(1))},this.isTouch=function(){return o},this.setTouch=function(e){return i(e)?(o=e,!0):!1},this.setMap=function(e,t){return a(e,t)?(r[e]=t,!0):!1},this.map=function(e){var t=r[e];return t&&o?t:e},this.setScope=function(e){return s=e,!0},this.scope=function(){return s}}}),define("Amy/Delegate-plugin",["Amy/Event-controller","Amy/DomUtils"],function(e,t){function n(){this.listen=function(e,t,n,s){var i=this;this.addListener(e,t,function(t){i.call(n,t,e)},"true"==s)},this.selector=function(e,n,s,i,a){var o=this;this.addListener(e,s,function(s){t.hasQuerySelector(e,s.target,n)&&o.call(i,s,e)},"true"==a)}}return function(t,s){return n.prototype=new e(t,s),new n}}),define("Amy/Control-plugin",["Amy/Event-controller","Amy/DomUtils"],function(e,t){function n(){var e=null;this.init=function(t){e=t},this.radio=function(n,s,i,a,o,r){var c=this;this.addListener(n,a,function(a){var r=a.target;t.hasQuerySelector(n,r,s)&&(c.radioClass(r,e,i),e=r,c.call(o,a))},"true"==r)},this.radioClass=function(e,t,n){e.classList.add(n),t&&t!=e&&t.classList.remove(n)},this.toggleClass=function(e,t){return e.classList.toggle(t)},this.toggle=function(e,n,s,i,a,o){var r=this;this.addListener(e,i,function(i){var o=i.target;t.hasQuerySelector(e,o,n)&&(r.toggleClass(o,s),r.call(a,i))},"true"==o)}}return function(t,s){return n.prototype=new e(t,s),new n}}),define("Amy/Stack-service",["Store","OObject","DomUtils","Tools","Observable"],function(e,t,n,s,i){return function(s,a){var o=new e(s),r=new i,c=a,l="",d=null;this.setDestination=function(e){return n.isAcceptedType(e)?(c=e,!0):!1},this.getDestination=function(){return c},this.setCurrentScreen=function(e){d=e,r.notify("StackChange",e)},this.getCurrentScreen=function(){return d},this.add=function(e,n){return"string"==typeof e&&n instanceof t?(o.set(e,n),this.hide(n),!0):!1},this.get=function(e){return o.get(e)},this.del=function(e){return o.del(e)},this.reset=function(e){return o.reset(e)},this.getCurrentName=function(){return l},this.show=function(e){var t=this.get(e);return t&&e!==l?(t.place(c),d&&this.hide(d),this.setCurrentScreen(t),l=e,!0):!1},this.hide=function(e){e.place(document.createDocumentFragment())},this.getObserver=function(){return r}}});